Entity framework es un ORM
ORM: mapeo de objeto relacional, es una tecnica que relaciona las entidades del lenguaje de programaci√≥n
con sus correspondientes elementos en una base de datos.

Swagger: es un conjunto de herramientas para dise√±ar, construir, documentar y usar API Rest de manera estandarizada

================================================
1) Instalar paquetes NuGet necesarios          | 
================================================
clic derecho en el proyecto->administrar paquetes Nuget->buscar
Microsoft.EntityFrameworkCore
Microsoft.EntityFrameworkCore.Sql
Microsoft.EntityFrameworkCore.Tools
Microsoft.EntityFrameworkCore.SqlServer
Validar que tenga las versiones mas estables

-Validar que este funcionando: 
Proyecto->Dependencias->Paquetes

===============================================
2) Configurar cadena de conexi√≥n              |
===============================================
La cadena de conexi√≥n es obligatoria.
Porque Entity Framework siempre necesita saber a qu√© base de datos conectarse, sin importar c√≥mo generes el modelo.

Proyecto->appsettings.json
ingresar la siguiente linea:
  "ConnectionStrings": {
    "DefaultConnection": "Server=DESKTOP-565TMAN;Database=FINANSYS;Trusted_Connection=True;TrustServerCertificate=True;"
  }

===============================================
4) Crear Clases Entidad                       |
===============================================
Existen dos enfoques: 
*Database First: primero se crea las tablas de la base de datos
*Code First: primero se crea las clases entidades que van a ser mapeadas a la base de datos

public DateTime FechaCreacion { get; private set; }

Anotaciones b√°sicas:
[Key]  // Siempre para clave primaria
[Required]  // Para campos NOT NULL
[StringLength(255)]  // Para campos VARCHAR/NVARCHAR
[MaxLength(255)]  // Alternativa a StringLength
[Table("NombreTabla")]  // Si el nombre de tabla difiere
[Column("NombreColumna")]  // Si el nombre de columna difiere
[ForeignKey("CampoId")]  // Para relaciones
[DatabaseGenerated]  // Para valores generados
[NotMapped]  // Para propiedades NO mapeadas a BD

===============================================
3) Crear DbContext                            |
===============================================

DbContext es el ‚Äúcerebro‚Äù de Entity Framework.
Es el objeto que ASP.NET usa para consultar, insertar, actualizar y eliminar datos en SQL Server.
Abre y administra la conexi√≥n, su funci√≥n es gestionar la conexi√≥n a la base de datos y definir qu√© tablas existen en esa base seg√∫n tus clases (modelos).

Buena practica crear una carpeta:
/Data o Persistence
   AppDbContext.cs

Crear una clase (AppDbContext) la clase extiende(:) de DbContext
Crear un constructor:  public AppDbContext(DbContextOptions<AppDbContext> options):base(options) { }
Crear un DbSet: public DbSet<Usuarios> Usuarios { get; set; }
*DbSet<T> Le dice a EF Existe una tabla llamada Usuarios basada en la entidad Usuario

2.1)opci√≥n para cuando la base de datos ya esta creada
buscar->consola del Administrador de Paquetes
Scaffold-DbContext "Data Source=name_server;Database=name_database;Trusted_Connection=True;TrustServerCertificate=True;" Microsoft.EntityFrameworkCore.SqlServer -OutputDir Models -Force

2)Para crear la base de datos desde las entidades






agregar la conexi√≥n al Archivo Program.cs
// üîπ Agregar conexi√≥n a la base de datos SQL Server
builder.Services.AddDbContext<AppDbContext>(options =>
    options.UseSqlServer(builder.Configuration.GetConnectionString("DefaultConnection")));

*****Instalar Swagger (desde la versi√≥n Net 9 no viene instalado)
-Abrir administrador de paquetes NuGet
-buscar: swashbuckle.aspnetcore.swagger,swashbuckle.aspnetcore
-Modificar el archivo Programa.cs: antes de builder a√±adir builder.Services.AddSwaggerGen();
en el if luego de app a√±adir:     app.UseSwaggerUI(); app.UseSwagger();
abrir el link: https://localhost:44309/swagger/index.html

=====================CLASE ENTITY===============
using System.ComponentModel.DataAnnotations;
using System.ComponentModel.DataAnnotations.Schema;

namespace clientes_api.Models
[Table("booking")]

[Key] // Clave primaria
[DatabaseGenerated(DatabaseGeneratedOption.Identity)] // IDENTITY (1,1)
public int booking_id { get; set; }
 [Column("status")]
 [StringLength(100)]
[Required]

==========CLASE CONTROLLER===================
[Route("api/v1/[controller]")]----->controller:quita la palabra Controller del nombre de la clase
class brandController
/api/v1/brand

1) crear la variable de dbcontex dentro de la clase: private readonly Data.AppDbContext _context;
2) Crear el contructor
3) crear los m√©todos HTTPS


============EXPORTAR BASE DE DATOS==============
Clik derecho BDD->Task(tareas)->Expor data-tier Aplication(Exportar aplicaci√≥n de capa)->Next->seleccionar ruta->Next

============PUBLICAR PROYECTO==============
Clik derecho en el nombre del proyecto->Publicar->Carpeta->Seleccionar carpeta->Publicar

==========HACER BUILD REACT VITE============
ejecutar en consola-> npm run build->crear carpeta dist->archivos est√°ticos optimizados (HTML, JS, CSS)


========================================pROGRAM
using clientes_api.Data;
using Microsoft.EntityFrameworkCore;

var builder = WebApplication.CreateBuilder(args);

builder.Services.AddCors(options =>
{
    options.AddPolicy("AllowFrontend", policy =>
    {
        policy
            .WithOrigins("http://localhost:5173") // tu Vite
            .AllowAnyHeader()
            .AllowAnyMethod();
    });
});

// üîπ Agregar conexi√≥n a la base de datos SQL Server
builder.Services.AddDbContext<AppDbContext>(options =>
    options.UseSqlServer(builder.Configuration.GetConnectionString("DefaultConnection")));

// Add services to the container.

builder.Services.AddControllers();
// Learn more about configuring OpenAPI at https://aka.ms/aspnet/openapi
builder.Services.AddOpenApi();
builder.Services.AddSwaggerGen();
var app = builder.Build();

// Configure the HTTP request pipeline.
if (app.Environment.IsDevelopment())
{
    app.MapOpenApi();
    app.UseSwaggerUI();
    app.UseSwagger();
}

app.UseHttpsRedirection();
// Usar la pol√≠tica de CORS (MUY IMPORTANTE: antes de UseAuthorization)
app.UseCors("AllowFrontend");
app.UseAuthorization();

app.MapControllers();

app.Run();
Dario leon
=============================

